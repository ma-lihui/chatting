(function(){var e,s,o,n,r;o={cursorcolor:"#696c75",cursorwidth:"4px",cursorborder:"none"},r={cursorcolor:"#cdd2d6",cursorwidth:"4px",cursorborder:"none"},e=["你好","哈哈"],n=function(e,s){return Math.floor(Math.random()*(s-e+1))+e},s=function(){return $("#texxt").val(""),$(".messages").getNiceScroll(0).resize(),$(".messages").getNiceScroll(0).doScrollTop(999999,999)},$(document).ready(function(){return $(".list-friends").niceScroll(o),$(".messages").niceScroll(r),$("#texxt").keypress(function(e){if(13===e.keyCode)return!1}),$(".send").click(function(){})})}).call(),angular.module("chat",[]).controller("live_chat",["$scope",function(e){e.submit_user=function(){e.user&&(o.emit("login",e.user),e.login=!0)};var s=function(){$(".messages").getNiceScroll(0).resize(),$(".messages").getNiceScroll(0).doScrollTop(999999,999)},o=io.connect("http://localhost:3000");e.send=function(){if(""!=e.send_message&&void 0!=e.send_message){var n={user:e.user,msg:e.send_message};o.emit("send",n),e.message.push({user:e.user,time:(new Date).toLocaleTimeString(),msg:e.send_message,me:!0}),$("#texxt").focus()}e.send_message="",s()},o.on("broadcast",function(o){o.user!=e.user&&(e.message.push(o),e.$apply()),s()}),o.on("log",function(e){console.log(e)}),e.key=function(s){13===s.keyCode&&e.send()},o.on("user",function(s){e.list_friends=s,e.$apply()}),e.message=[]}]).filter("online_status",function(){return function(e){return 1==e?"在线":0==e?"离线":void 0}});